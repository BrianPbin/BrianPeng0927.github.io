<!DOCTYPE html>
<html>

	<head>
		<style>
			html,body {height:100%;}
			body {margin:0;}
			img {width:640px; height:378px; position:absolute; left:50%; top:50%; margin-top:-189px; margin-left:-320px;}
		</style>
		<meta charset="utf-8" />
		<title>360度全景展示</title>
        <script>
            onload = function () {
                /*
                创建 图片 img元素
                 */
                for(var i=1;i<=76;i++){
                   var img =  document.createElement("img");
                    img.src = "img/"+i+".jpg";
                    img.style.display = "none";
                    document.body.appendChild(img);
                }

                var imgs = document.getElementsByTagName("img");
                var lastIndex = 0;
                var index = 0;
                var preIndex = 0;
                document.onmousedown = function (evt) {
                    clearInterval(id);
                    var e = evt || window.event;
                    var startX = e.clientX;
                    document.onmousemove = function (evt ) {
                        var e = evt || window.event;
                        var endX = e.clientX;
                        var dis = startX  - endX;//每过10px，就换一张图片
                        if(dis>=0){
                            index = (lastIndex + Math.floor(dis/10))%77;
                        }else{
                            index = (lastIndex + (Math.floor(dis/10)%77)+77)%77;
                        }
                        imgs[preIndex].style.display = "none";
                        imgs[index].style.display = "block";
                        preIndex = index;
                    }
                }
                document.onmouseup = function () {
                    lastIndex = index;
                    document.onmousemove = null;
                    id = setInterval(func,75);
                }

                /*
                自动会转，然后点击拖动的时候就取消间歇

                 */
                var id = setInterval(func,75);

                function func(){

                    imgs[index].style.display = "none";
                    index++;
                    if(index>76){
                        index = 0;
                    }
                    imgs[index].style.display = "block";
                    lastIndex = index;
                }

            }
        </script>

	</head>

	<body>
		<div style="z-index: 100; opacity: 0.01; background: black; position: fixed; width: 100%; height: 100%;"></div>
		<img id="img0" src="img/0.jpg" />
	</body>
    <!--<script>-->
        <!--window.onload=function(){-->
            <!--//	var img0= document.getElementById("img0");-->
            <!--//	img0.index = 0;-->
            <!--//缓冲区-->
<!--//				var frag = document.createDocumentFragment();-->
            <!--//加载所有图片-->
            <!--for(var i=1; i<=76; i++){-->
                <!--var img = document.createElement("img");-->
                <!--//		img.index = i;-->
                <!--img.src = "img/"+i+".jpg";-->
                <!--img.style.display = "none";-->
                <!--document.body.appendChild(img);-->
<!--//					frag.appendChild(img);-->
            <!--}-->
<!--//				document.body.appendChild(frag);-->
            <!--//伪数组  instanceof NodeList-->
            <!--var imgs = document.getElementsByTagName("img");-->
            <!--var lastIndex = 0;//当前图片下标-->
            <!--var startX = 0;-->
            <!--var index = 0;//指的是 图片改变后的下标-->
            <!--var prevImg = null;-->
            <!--document.onmousedown = function(event){-->
                <!--startX = event.clientX;//拿初始化位置-->
                <!--document.onmousemove = function(event){-->
                    <!--//随着移动，更换图片-->
                    <!--var x = event.clientX;//变动的位置-->
                    <!--var dis = x - startX;//计算改变量  distance-->
                    <!--if(dis >= 0) {-->
                        <!--index = (lastIndex + Math.floor(dis/15))%77;-->
                    <!--} else {-->
                        <!--index = (77 + (lastIndex + Math.floor(dis/15)))%77;-->
                    <!--}-->
<!--//                    index = (77 + (lastIndex + Math.floor(dis/15)))%77;-->
                    <!--//效率待改进-->
<!--//						for(var i=0; i<imgs.length; i++) {-->
<!--//							imgs[i].style.display = "none";-->
<!--//						}-->

                    <!--if(prevImg){-->
                        <!--prevImg.style.display = "none";-->
                    <!--}-->

                    <!--imgs[index].style.display = "block";-->
                    <!--document.title = index;-->
                    <!--prevImg = imgs[index];-->
                <!--}-->
            <!--}-->
            <!--document.onmouseup = function(event){-->
                <!--//鼠标松开时记录位置-->
                <!--lastIndex = index;-->
                <!--document.onmousemove = "";-->
            <!--}-->
        <!--};-->
    <!--</script>-->
</html>